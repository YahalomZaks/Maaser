# מערכת ניהול מעשרות (Ma'aser Management System)

## תיאור כללי

מערכת לניהול ומעקב אחר מעשרות (צדקה של 10% מהכנסה נטו) הכוללת דשבורד אישי, ניהול הכנסות, ניהול תרומות, התראות והגדרות.

**הערות חשובות:**

- כל משתמש עצמאי ואינו קשור למשתמשים אחרים
- עדכון מעשרות נעשה ידנית על ידי המשתמש
- חודשים מתחילים ב-1 לחודש לפי לוח שנה - \*\*משתמש ללא הגדרת הכנסה - הנחיה להשלמת הגדרות בעמוד Settings

### Modal דיווח תקלות והצעות שיפור:

**מיקום:** Modal שנפתח מעמוד הברוכים הבאים או מכל עמוד אחר (כפתור קבוע)
**זמינות:** לכל המשתמשים - גם מחוברים וגם אורחים

#### תוכן המודל:

**שלב 1 - בחירת סוג הפנייה:**

- **כפתור "דיווח על תקלה" 🐛**
- **כפתור "הצעה לשיפור" 💡**

**שלב 2 - מילוי פרטים:**

- **שם מלא:** שדה טקסט חובה
- **כתובת אימייל:** שדה אימייל חובה (לקבלת מענה)
- **תוכן ההודעה:** תיבת טקסט גדולה (עד 1000 תווים)
  - עבור תקלה: "תאר את התקלה בפירוט, מתי קרתה ואיך לשחזר אותה"
  - עבור הצעה: "תאר את ההצעה לשיפור בפירוט"

**שלב 3 - שליחה:**

- **כפתור "שלח"** - שולח את הטופס ומציג הודעת אישור
- **כפתור "ביטול"** - סוגר את המודל

#### התנהגות:

- הטופס נשלח לטבלה במסד הנתונים
- הצגת הודעת הצלחה לאחר שליחה
- סגירה אוטומטית של המודל
- אפשרות להוסיף כפתור קבוע בתחתית כל עמוד למשוב מהירועזי
- משתמש חדש עובר שאלון ראשוני להגדרת המערכת
- מערכת תפקידים: מנהל מערכת יחיד (אתה) + משתמשים רגילים

## דרישות רב-לשוניות (Internationalization - i18n)

**שפות נתמכות:**

- **עברית** (rtl) - שפת ברירת מחדל לישראל
- **אנגלית** (ltr) - שפה משנית

**התנהגות שפה:**

- **ברירת מחדל:** לפי שפת המכשיר של המשתמש (browser locale)
- **שמירת העדפה:** בחירת שפה נשמרת בהגדרות המשתמש במסד הנתונים
- **עדיפות:** אם המשתמש בחר שפה בהגדרות - תמיד תשמש השפה שבחר
- **עמידות:** השפה הנבחרת נשארת גם אחרי רענון עמוד או התחברות מחדש

**טכני:**

- שימוש ב-next-intl לניהול תרגומים
- קבצי JSON נפרדים לכל שפה
- כל טקסט בקוד הוא דינאמי (לא הארד-קודד)
- תמיכה בכיווניות RTL/LTR
- תרגום תאריכים, מספרים ומטבעות

**קבצי תרגום:**

- `locales/he.json` - עברית
- `locales/en.json` - אנגלית

**רכיבי UI:**

- כפתור החלפת שפה בניווט העליון
- איקון דגל לזיהוי השפה הנוכחית
- שמירה אוטומטית של השפה הנבחרת

## מבנה המערכת

### 0. עמוד ברוכים הבאים (Welcome Page)

**מיקום:** `/` (דף הבית הראשי)
**קהל יעד:** משתמשים חדשים ואורחים שלא מחוברים

#### תוכן העמוד:

**חלק עליון - Hero Section:**

- **כותרת ראשית:** "מערכת ניהול מעשרות מתקדמת"
- **תת-כותרת:** הסבר קצר על המערכת ויתרונותיה
- **תמונה/איור:** גרפיקה המסבירה את עקרון המעשר
- **כפתורי פעולה:**
  - 🔑 "התחבר למערכת" (אם יש כבר חשבון)
  - ✨ "הירשם עכשיו" (ליצירת חשבון חדש)

**חלק אמצעי - יתרונות המערכת:**

- **כרטיסי תכונות** (Features Cards):
  - 📊 "מעקב אוטומטי אחר מעשרות"
  - 💰 "ניהול הכנסות ותרומות"
  - 📱 "התראות חכמות"
  - 📈 "דוחות מפורטים"
  - 🌐 "תמיכה בעברית ואנגלית"
  - 🔒 "בטוח ופרטי לחלוטין"

**חלק תחתון - מידע נוסף:**

- **סעיף "אודות":** הסבר מפורט על המערכת, מי פיתח, למה נוצרה
- **FAQ קצר:** שאלות נפוצות בסיסיות
- **יצירת קשר:** פרטי יצירת קשר עם המפתח
- **דיווח על תקלות והצעות לשיפור:** כפתור להשלחת משוב למפתח

#### רכיבי ניווט:

**ניווט עליון:**

- 🏠 לוגו/שם המערכת (לינק לדף הראשי)
- 🌐 **החלפת שפות** (עברית ⇄ אנגלית)
- 🔑 "התחבר"
- ✨ "הירשם"

**סרגל החלפת שפות:**

- רכיב קבוע/נפתח למעלה או למטה העמוד
- דגלים להחלפה מהירה: 🇮🇱 עברית | 🇺🇸 English
- שמירה אוטומטית של העדפת השפה

#### התנהגות וניתוב:

- **אורחים:** רואים את עמוד הברוכים הבאים
- **משתמשים מחוברים:** מנותבים אוטומטית ל-`/dashboard`
- **לאחר הרשמה/התחברות:** מעבר ישיר לשאלון ראשוני (אם חדש) או לדשבורד

### 1. שאלון ראשוני למשתמש חדש (First-Time Setup)

**מיקום:** Modal שנפתח בכניסה הראשונה לאחר רישום/התחברות
**תנאי:** `isFirstTimeSetupCompleted = false` בהגדרות המשתמש

#### תוכן השאלון:

1. **ברוכים הבאים למערכת ניהול מעשרות!**
   - הסבר קצר על המערכת ופונקציותיה
2. **הגדרת הכנסה:**

   - "מה ההכנסה החודשית נטו שלך?"
   - "האם יש לך בן/בת זוג עם הכנסה? (אופציונלי)"
   - "מה ההכנסה החודשית נטו שלו/שלה?"

3. **הגדרת תרומות קיימות:**

   - "האם אתה כבר תורם למקומות מסוימים?"
   - עבור כל מקום:
     - שם הארגון/מקום
     - סכום התרומה
     - סוג התרומה (קבועה/מוגבלת/חד פעמית)
     - פרטים נוספים לפי הסוג

4. **סיום ואישור:**
   - סיכום הנתונים שהוזנו
   - כפתור "התחל להשתמש במערכת"

#### התנהגות:

- המודל נפתח רק בכניסה הראשונה למערכת (אחרי הרשמה/התחברות)
- לא ניתן לסגור בלי להשלים את השאלון
- אפשרות "דלג על שלב זה" (ידרש אישור נוסף)
- לאחר השלמה: `isFirstTimeSetupCompleted = true` ומעבר לדשבורד

### 2. דשבורד אישי (Dashboard)

**מיקום:** `/dashboard`

#### תצוגה עיקרית (לפי חודש נוכחי):

- **סה"כ הכנסה נטו החודש:** הצגת ההכנסה הנטו הכוללת
- **מעשרות לתשלום:** 10% מההכנסה הנטו
- **מעשרות שניתנו:** סכום כל התרומות שניתנו החודש
- **יתרה/חוב:** הפרש בין מה שנדרש למה שניתן
  - ✅ **יתרה (עודף):** מוצג בירוק עם סימן +
  - ❌ **חוב (חסר):** מוצג באדום עם סימן -
- **יתרה מצטברת:** חוב/יתרה שנגררים מחודשים קודמים

#### רשימת תרומות החודש:

- רשימה של כל המקומות שניתנה להם תרומה החודש
- עבור כל מקום: שם, סכום, תאריך, סוג התרומה

#### ניווט בין חודשים:

- חצים ◀ ▶ לעבור בין חודשים
- תצוגת החודש והשנה הנוכחיים
- נתונים היסטוריים לכל חודש

### 3. ניהול הכנסות (Income Management)

**מיקום:** `/income`

#### הכנסות קבועות:

- **הכנסה אישית:** הכנסה נטו חודשית קבועה
- **הכנסת בן/בת זוג:** הכנסה נטו חודשית קבועה (אופציונלי)
- **סה"כ הכנסה:** חישוב אוטומטי של הסכום הכולל
- **מעשרות חודשיים:** 10% מהסכום הכולל

#### הכנסות חד פעמיות:

- אפשרות להוסיף הכנסה חד פעמית לחודש ספציפי
- בחירת חודש ושנה
- הזנת סכום
- רשימת כל ההכנסות החד פעמיות

#### פעולות:

- ✏️ עריכת הכנסות קבועות
- ➕ הוספת הכנסה חד פעמית
- 🗑️ מחיקת הכנסה חד פעמית (עם אזהרה למשתמש)
- 📊 צפייה בהיסטוריית הכנסות

### 4. ניהול תרומות (Donations Management)

**מיקום:** `/donations`

#### סוגי תרומות:

1. **תשלומים ללא מגבלה:** תרומה קבועה חודשית
2. **תשלומים מוגבלים:** X תשלומים מתוך Y (למשל 5 מתוך 12)
3. **תרומה חד פעמית:** תרומה לחודש ספציפי בלבד

#### עבור כל תרומה:

- **שם המקום/ארגון**
- **סכום התרומה**
- **סוג התרומה** (קבועה/מוגבלת/חד פעמית)
- **מידע נוסף לפי סוג:**
  - תשלומים מוגבלים: "תשלום X מתוך Y"
  - חד פעמית: תאריך התרומה
- **סטטוס:** פעיל/לא פעיל

#### ניווט בין חודשים:

- עבור בין חודשים לראות תרומות של חודשים ספציפיים
- תצוגת התקדמות תשלומים מוגבלים
- היסטוריה מלאה של תרומות

#### פעולות:

- ➕ הוספת תרומה חדשה
- ✏️ עריכת תרומה קיימת
- 🗑️ מחיקת תרומה (עם אזהרה למשתמש)
- 📊 צפייה בסטטיסטיקות

### 5. התראות (Notifications)

**מיקום:** איקון פעמון בניווט העליון

#### מערכת התראות:

- **איקון פעמון** בניווט העליון
- **נקודה אדומה** מעל הפעמון כאשר יש התראות חדשות
- **ללא נקודה** כאשר כל ההתראות נקראו

#### סוגי התראות (לבינתיים):

- **התראת תשלום אחרון:** חודש לפני סיום תשלומים מוגבלים
  - "תשלום אחרון לארגון X יהיה החודש הבא"

#### פעולות:

- 👁️ סימון התראה כנקראה
- 🗑️ מחיקת התראה
- 📋 צפייה בכל ההתראות

### 6. הגדרות (Settings)

**מיקום:** `/settings`

#### הגדרות שפה ומטבע:

- **שפה:** עברית (ברירת מחדל) / אנגלית
- **מטבע:** ₪ שקל (ברירת מחדל) / $ דולר

#### ניהול חשבון:

- **שינוי סיסמה:**
  - שדה להזנת סיסמה נוכחית
  - שדה להזנת סיסמה חדשה
  - שדה לאישור סיסמה חדשה
  - ולידציה של חוזק הסיסמה
- **מידע אישי:**
  - שם מלא
  - כתובת אימייל (לא ניתן לשינוי)

### 7. מערכת לוגים ומעקב (Logging & Analytics)

**גישה:** פנל ניהול נפרד - **רק למנהל מערכת**
**הרשאות:** נגיש רק למשתמש עם role = 'ADMIN'

#### מעקב אחר משתמשים:

- **לוג כניסות:** זמן כניסה, זמן יציאה, IP address
- **פעילות במערכת:** איזה עמודים נוצפו, מתי
- **סטטיסטיקות שימוש:**
  - כמה משתמשים פעילים ביום/שבוע/חודש
  - אילו תכונות הכי בשימוש
  - זמן ממוצע בכל עמוד

#### דוחות ניהול:

- רשימת כל המשתמשים ותאריכי הרשמה
- מי התחבר לאחרונה
- מי לא השתמש במערכת זמן רב
- מעקב אחר שגיאות וקריסות במערכת

### 8. ניהול משוב ותקלות (Feedback Management) - אדמין בלבד

**מיקום:** `/admin/feedback`
**גישה:** רק למנהל מערכת (role = 'ADMIN')

#### תצוגה כללית:

**סיכום מהיר:**

- 📊 **סך הפניות:** מספר כולל של דיווחים
- 🐛 **תקלות פתוחות:** דיווחי תקלה שטרם טופלו
- 💡 **הצעות פתוחות:** הצעות שיפור שטרם נבדקו
- ✅ **טופלו השבוע:** מספר פניות שטופלו השבוע

#### רשימת דיווחים:

**מיון וסינון:**

- **לפי סוג:** כל הדיווחים / תקלות / הצעות שיפור
- **לפי סטטוס:** ממתין / בטיפול / טופל / נדחה
- **לפי תאריך:** חדש לישן / ישן לחדש
- **לפי עדיפות:** (אפשר להוסיף בעתיד)

**עבור כל דיווח בטבלה:**

- **סוג:** 🐛 תקלה / 💡 הצעת שיפור
- **שם השולח** ואימייל
- **תוכן מקוצר** (50 תווים ראשונים)
- **סטטוס נוכחי** עם צבעים:
  - 🟡 ממתין (צהוב)
  - 🔵 בטיפול (כחול)
  - 🟢 טופל (ירוק)
  - 🔴 נדחה (אדום)
- **תאריך דיווח**
- **כפתורי פעולה:** 👁️ צפייה / ✏️ עריכה

#### מודל צפייה/עריכת דיווח:

**מידע הדיווח:**

- שם השולח, אימייל, תאריך
- סוג הדיווח ותוכן מלא
- פרטים טכניים (דפדפן, עמוד)

**ניהול הדיווח:**

- **שינוי סטטוס:** תפריט נפתח לבחירת סטטוס
- **הערות מנהל:** תיבת טקסט להערות פנימיות
- **תאריך טיפול:** מתעדכן אוטומטית בשינוי לסטטוס "טופל"

**פעולות:**

- 💾 **שמירה** - שמירת שינויים
- 📧 **שליחת מענה** - (אופציונלי לעתיד) שליחת אימייל למדווח
- 🗑️ **מחיקה** - מחיקת הדיווח (עם אישור)

#### הגדרות מתקדמות:

**התראות לאדמין:**

- הודעה במערכת על דיווח חדש
- אימייל אוטומטי על תקלות דחופות (אופציונלי)

**ייצוא נתונים:**

- ייצוא דיווחים ל-CSV לארכיון
- סטטיסטיקות חודשיות על סוגי הפניות

## דרישות עיצוב וחוויית משתמש (UI/UX)

### עיצוב רספונסיבי (Responsive Design)

**תמיכה במכשירים:**

- 💻 **מחשבים נייחים וניידים** - רזולוציות 1920px ומעלה
- 💻 **מחשבים ניידים** - רזולוציות 1366px-1919px
- 📱 **טאבלטים** - רזולוציות 768px-1365px
- 📱 **סמארטפונים** - רזולוציות 320px-767px

**עקרונות עיצוב:**

- **Mobile First** - עיצוב מותאם תחילה למובייל, ואז מורחב למסכים גדולים
- **Touch Friendly** - כפתורים וקישורים בגודל מתאים למגע (מינימום 44px)
- **נגישות** - ניגודיות מתאימה, תמיכה בקוראי מסך, ניווט במקלדת
- **מהירות טעינה** - אופטימיזציה לטעינה מהירה במכשירים ניידים

**התאמות למובייל:**

- **ניווט מתקפל** - תפריט המבורגר במכשירים ניידים
- **טבלאות מותאמות** - גלילה אופקית או מבנה שונה בנייד
- **טפסים מותאמים** - שדות גדולים ונוחים למגע
- **תוכן מותאם** - הסתרה/שינוי של תוכן לא חיוני במסכים קטנים

### כיווניות RTL/LTR

**תמיכה דינמית:**

- **עברית (RTL)** - כל האלמנטים מיושרים מימין לשמאל
- **אנגלית (LTR)** - כל האלמנטים מיושרים משמאל לימין
- **החלפה אוטומטית** - שינוי כיווניות מיידי עם החלפת שפה
- **אייקונים ותמונות** - התאמה לכיוון (חצים, סמלי ניווט)

## 5. בקרת גישה והתנהגות מערכת

### בקרת גישה לפי סוג משתמש:

**אורחים (לא מחוברים):**

- גישה רק לעמוד ברוכים הבאים (`/`), התחברות (`/signin`), הרשמה (`/signup`) ואיפוס סיסמה (`/forgot-password`)
- ניסיון גישה לנתיב מוגן - הפניה ל-`/signin`

**משתמשים רגילים (USER):**

- גישה למכל הנתיבים האישיים: dashboard, income, donations, settings
- אין גישה לנתיבי ניהול (`/admin/*`)

**אדמינים (ADMIN):**

- גישה לכל הנתיבים כולל נתיבי ניהול
- יכולים לגשת לכל הפונקציות והדוחות

### הפניות אוטומטיות:

**משתמש מחובר:**

- ניסיון גישה ל-`/` - הפניה ל-`/dashboard`
- ניסיון גישה ל-`/signin` או `/signup` - הפניה ל-`/dashboard`

**אורח לא מחובר:**

- ניסיון גישה לנתיב מוגן - הפניה ל-`/signin` עם redirect parameter
- לאחר התחברות מוצלחת - הפניה לעמוד המבוקש המקורי או ל-`/dashboard`

**התנהגות מיוחדת:**

- משתמש חדש לאחר הרשמה - מוצג שאלון ראשוני לפני כניסה לדשבורד
- משתמש ללא הגדרת הכנסה - הנחיה להשלמת הגדרות בעמוד Settings

## דרישות טכניות

### מודלים במסד הנתונים:

#### User (מעודכן)

```typescript
- id: string
- name: string
- email: string
- password: string
- emailVerified: boolean
- role: enum ('USER', 'ADMIN') default: 'USER'
- createdAt: DateTime
- updatedAt: DateTime
```

#### Income (הכנסות)

```typescript
- id: string
- userId: string (FK)
- personalIncome: number (הכנסה אישית)
- spouseIncome: number? (הכנסת בן/בת זוג)
- month: number (1-12)
- year: number
- isOneTime: boolean (האם חד פעמית)
- oneTimeAmount: number? (סכום חד פעמי)
- createdAt: DateTime
- updatedAt: DateTime
```

#### Donation (תרומות)

```typescript
- id: string
- userId: string (FK)
- organizationName: string (שם הארגון)
- amount: number (סכום)
- donationType: enum ('UNLIMITED', 'LIMITED', 'ONE_TIME')
- month: number (1-12)
- year: number
- limitedPayments?: {
  current: number (תשלום נוכחי)
  total: number (סך התשלומים)
}
- isActive: boolean
- createdAt: DateTime
- updatedAt: DateTime
```

#### Notification (התראות)

```typescript
- id: string
- userId: string (FK)
- title: string (כותרת ההתראה)
- message: string (תוכן ההתראה)
- type: enum ('FINAL_PAYMENT', 'DEBT_REMINDER', etc.)
- isRead: boolean
- createdAt: DateTime
- updatedAt: DateTime
```

#### UserSettings (הגדרות משתמש)

```typescript
- id: string
- userId: string (FK)
- language: enum ('HE', 'EN') default: 'HE'
- currency: enum ('ILS', 'USD') default: 'ILS'
- isFirstTimeSetupCompleted: boolean default: false
- createdAt: DateTime
- updatedAt: DateTime
```

#### UserActivityLog (לוג פעילות משתמשים)

```typescript
- id: string
- userId: string (FK)
- action: string (תיאור הפעולה)
- page: string (עמוד במערכת)
- ipAddress: string
- userAgent: string
- sessionDuration: number? (משך הפעלה בדקות)
- createdAt: DateTime
```

#### LoginHistory (היסטוריית כניסות)

```typescript
- id: string
- userId: string (FK)
- loginTime: DateTime
- logoutTime: DateTime?
- ipAddress: string
- deviceInfo: string
- loginSuccess: boolean
- createdAt: DateTime
```

#### UserFeedback (דיווחי תקלות והצעות שיפור)

```typescript
- id: string
- type: enum ('BUG_REPORT', 'FEATURE_REQUEST')
- fullName: string (שם מלא הדווח)
- email: string (אימייל ליצירת קשר)
- message: string (תוכן ההודעה - עד 1000 תווים)
- status: enum ('PENDING', 'IN_PROGRESS', 'RESOLVED', 'REJECTED') default: 'PENDING'
- adminNotes: string? (הערות של המנהל)
- resolvedAt: DateTime? (מתי טופל)
- resolvedBy: string? (מי טיפל - user ID)
- userAgent: string? (דפדפן ומכשיר)
- pageUrl: string? (עמוד ממנו נשלח הדיווח)
- createdAt: DateTime
- updatedAt: DateTime
```

### עמודים ונתיבים:

**אורחים (לא מחוברים):**

- `/` - עמוד ברוכים הבאים (Welcome Page)
- `/signin` - התחברות למערכת
- `/signup` - הרשמה למערכת
- `/forgot-password` - איפוס סיסמה

**משתמשים רגילים (USER):**

- `/dashboard` - דשבורד אישי
- `/income` - ניהול הכנסות
- `/donations` - ניהול תרומות
- `/settings` - הגדרות
- `/notifications` - (פופ-אפ או דרופ-דאון מהפעמון)

**מנהל מערכת (ADMIN):**

- כל הנתיבים הרגילים +
- `/admin/dashboard` - דשבורד ניהול
- `/admin/users` - ניהול משתמשים
- `/admin/logs` - צפייה בלוגים
- `/admin/analytics` - סטטיסטיקות מערכת
- `/admin/feedback` - ניהול דיווחי תקלות והצעות שיפור

### הרשאות ותפקידים:

#### משתמש רגיל (USER):

- ✅ גישה לכל התכונות האישיות
- ✅ ניהול הכנסות ותרומות אישיות
- ✅ קבלת התראות אישיות
- ✅ שינוי הגדרות אישיות
- ❌ אין גישה ללוגים או נתוני משתמשים אחרים
- ❌ אין גישה לפנל ניהול

#### מנהל מערכת (ADMIN):

- ✅ כל הרשאות המשתמש הרגיל
- ✅ צפייה בכל הלוגים ופעילות המערכת
- ✅ סטטיסטיקות שימוש כלליות
- ✅ רשימת משתמשים ופעילותם
- ✅ ניהול הגדרות מערכת כלליות
- ✅ **ניהול דיווחי תקלות והצעות שיפור**
- ✅ **מעקב וטיפול בפניות המשתמשים**
- ⚠️ **אין גישה לנתונים אישיים** של משתמשים אחרים (הכנסות/תרומות)

### חישובים:

1. **מעשרות חודשיים:** (הכנסה אישית + הכנסת בן/בת זוג + הכנסות חד פעמיות) × 10%
2. **יתרה/חוב:** מעשרות שניתנו - מעשרות נדרשים
3. **יתרה מצטברת:** סכום יתרות/חובות מכל החודשים הקודמים
4. **התראות:** בדיקה חודשית לתשלומים מוגבלים שמסתיימים

## דרישות מיושמות (עודכן):

### ✅ תשובות לשאלות:

1. **תדירות עדכון:** ✅ עדכון ידני - המשתמש מכניס הכנסות ותרומות באופן ידני

2. **ברירות מחדל:** ✅ שאלון ראשוני - משתמש חדש עובר שאלון הגדרה ראשוני לפני גישה למערכת

3. **מחיקת נתונים:** ✅ מותר עם אזהרה - ניתן למחוק נתונים היסטוריים אבל עם אזהרה מפורשת למשתמש

4. **התראות נוספות:** ❌ כרגע רק התראת תשלום אחרון - ניתן להוסיף בעתיד

5. **ייצוא נתונים:** ❌ לא נדרש כרגע - ניתן להוסיף בהמשך

6. **תאריכים:** ✅ לוח שנה לועזי - חודשים מתחילים ב-1 לחודש לפי לוח שנה גרגוריאני

### 🔧 דרישות נוספות:

7. **מערכת לוגים:** ✅ מעקב מלא אחר פעילות משתמשים וכניסות למערכת

8. **עצמאות משתמשים:** ✅ כל משתמש עצמאי ללא קשרים בין משתמשים

9. **מערכת תפקידים:** ✅ הפרדה בין משתמש רגיל למנהל מערכת

### 🔐 הגדרת מנהל מערכת:

**מנהל ראשון:**

- המשתמש הראשון שנרשם למערכת (או מייל ספציפי שמוגדר בקוד)
- יקבל אוטומטית role = 'ADMIN'
- כל משתמש אחר יקבל role = 'USER'

**אבטחה:**

- המערכת תבדוק את ה-role בכל עמוד מוגבל
- Middleware שמגן על נתיבי /admin/\*
- הסתרת כפתורים/תפריטים שלא רלוונטיים למשתמש רגיל

## סדר עדיפויות לפיתוח:

### שלב 1 - תשתית בסיסית:

1. עדכון מסד הנתונים עם הטבלאות החדשות
2. **הוספת שדה role למודל User**
3. **הגדרת מערכת הרשאות (middleware)**
4. הגדרת מערכת לוגים
5. יצירת שאלון ראשוני למשתמש חדש

### שלב 2 - דשבורד וניהול הכנסות:

6. דף ניהול הכנסות
7. דשבורד עם חישובי מעשרות
8. ניווט בין חודשים

### שלב 3 - ניהול תרומות:

9. דף ניהול תרומות
10. 3 סוגי תרומות שונים
11. מעקב אחר התקדמות תשלומים

### שלב 4 - תכונות מתקדמות:

12. מערכת התראות
13. הגדרות שפה ומטבע
14. שינוי סיסמה

### שלב 5 - פנל ניהול (רק למנהל):

15. **דשבורד ניהול עם סטטיסטיקות**
16. **צפייה בלוגים ופעילות משתמשים**
17. **ניהול משתמשים (הפעלה/השבתה)**
18. **מערכת דיווח תקלות והצעות שיפור**
19. **עמוד ניהול משוב למנהל מערכת**

### שלב 6 - תכונות משוב ותמיכה:

20. **Modal דיווח תקלות זמין מכל עמוד**
21. **מערכת התראות למנהל על דיווחים חדשים**
22. **אפשרות מענה אוטומטי באימייל (אופציונלי)**
