# TODO List - מערכת ניהול מעשרות (Ma'aser Management System)

##### 1.6 עיצוב רספונסיבי ונגישות - 🆕 משופר!
- [ ] Mobile First Design - עיצוב מותאם תחילה למובייל
- [ ] תמיכה ברזולוציות: 320px-767px (מובייל), 768px-1365px (טאבלט), 1366px+ (דסקטופ)
- [ ] Touch Friendly - כפתורים מינימום 44px לנוחות מגע
- [ ] ניווט מתקפל (המבורגר) במכשירים ניידים
- [ ] טבלאות מותאמות עם גלילה אופקית
- [ ] טפסים מותאמים למובייל
- [ ] הסתרת תוכן לא חיוני במסכים קטנים
- [ ] בדיקה בכל הדפדפנים הפופולריים

### 1.7 שאלון ראשוני למשתמש חדש 🎯 הבא בתור!
- [ ] יצירת Modal רכיב לשאלון ראשוני עם תמיכה מלאה ב-i18n
- [ ] שלב 1: ברוכים הבאים + הסבר המערכת בשפת המשתמש
- [ ] שלב 2: הגדרת מטרות תרומה ומעשר
- [ ] שלב 3: הגדרת הכנסות ראשוניות (אישית + בן/בת זוג)
- [ ] שלב 4: הגדרת העדפות והודעותתית בסיסית ואבטחה

### 1.0 עמוד ברוכים הבאים (Welcome Page) - 🆕 חדש!
- [ ] יצירת עמוד ברוכים הבאים (/) למשתמשים חדשים
- [ ] Hero Section עם כותרת וכפתורי CTA
- [ ] כרטיסי יתרונות המערכת (6 תכונות עיקריות)
- [ ] סעיף אודות עם הסבר מפורט
- [ ] FAQ בסיסי עם שאלות נפוצות
- [ ] פרטי יצירת קשר
- [ ] 🆕 כפתור דיווח תקלות והצעות שיפור
- [ ] ניווט עליון עם החלפת שפות
- [ ] הפניות אוטומטיות למשתמשים מחוברים
- [ ] עיצוב רספונסיבי מלא

### 1.1 עדכון מסד הנתונים
✅ הוספת שדה `role` למודל User (enum: 'USER', 'ADMIN')
✅ יצירת טבלת Income (הכנסות)
✅ יצירת טבלת Donation (תרומות)
✅ יצירת טבלת Notification (התראות)
✅ יצירת טבלת UserSettings (הגדרות משתמש)
✅ יצירת טבלת UserActivityLog (לוג פעילות)
✅ יצירת טבלת LoginHistory (היסטוריית כניסות)
- [ ] 🆕 יצירת טבלת UserFeedback (דיווחי תקלות והצעות שיפור)
✅ הרצת migration לעדכון בסיס הנתונים

### 1.2 מערכת הרשאות ואבטחה
✅ יצירת middleware לבדיקת הרשאות
✅ הגנה על נתיבי /admin/* (רק למנהל)
✅ יצירת hook לבדיקת role במרכיבים
✅ הגדרת מנהל ראשון (אוטומטית או לפי מייל ספציפי)
✅ הגדרת ברירת מחדל USER לכל משתמש חדש

### 1.3 מערכת לוגים
✅ יצירת פונקציות לרישום פעילות משתמשים
✅ מעקב אחר כניסות ויציאות
✅ רישום ניווט בין עמודים
✅ שמירת IP address ו-User Agent
✅ מדידת זמן פעלילות בכל עמוד

### 1.3.5 מערכת רב-לשוניות (i18n) - ✅ הושלם!
✅ התקנה והגדרת next-intl
✅ יצירת קבצי תרגום עברית ואנגלית מקיפים
✅ הגדרת i18n configuration עם זיהוי חכם
✅ יצירת רכיבי החלפת שפה (מלא וקומפקטי)
✅ עדכון UserSettings להכיל שפה מועדפת
✅ API לעדכון שפה עם רישום פעילות
✅ תמיכה ב-RTL עבור עברית ו-LTR עבור אנגלית
✅ אינטגרציה מלאה ב-layout עם next-intl provider
- [ ] המרת כל הטקסטים הסטטיים לדינאמיים (אופציונלי)
- [ ] תמיכה ב-RTL לעברית ו-LTR לאנגלית
- [ ] תרגום תאריכים ומספרים
- [ ] בדיקת כל העמודים עם שתי השפות

### 1.5 מערכת דיווח משוב ותקלות - 🆕 חדש!
- [ ] יצירת Modal דיווח תקלות והצעות שיפור
- [ ] שלב 1: בחירת סוג הפנייה (תקלה/הצעת שיפור)
- [ ] שלב 2: מילוי פרטים (שם, אימייל, תוכן הודעה)
- [ ] שלב 3: שליחה והצגת הודעת אישור
- [ ] שמירת דיווחים במסד הנתונים
- [ ] איסוף פרטים טכניים (דפדפן, עמוד, IP)
- [ ] אפשרות להוסיף כפתור קבוע בכל עמוד
- [ ] תמיכה מלאה ב-i18n (עברית/אנגלית)
- [ ] זמינות גם לאורחים וגם למשתמשים מחוברים

### 1.6 עיצוב רספונסיבי ונגישות - � משופר!
- [ ] Mobile First Design - עיצוב מותאם תחילה למובייל
- [ ] תמיכה ברזולוציות: 320px-767px (מובייל), 768px-1365px (טאבלט), 1366px+ (דסקטופ)
- [ ] Touch Friendly - כפתורים מינימום 44px לנוחות מגע
- [ ] ניווט מתקפל (המבורגר) במכשירים ניידים
- [ ] טבלאות מותאמות עם גלילה אופקית
- [ ] טפסים מותאמים למובייל
- [ ] הסתרת תוכן לא חיוני במסכים קטנים
- [ ] בדיקה בכל הדפדפנים הפופולריים
- [ ] יצירת Modal רכיב לשאלון ראשוני עם תמיכה מלאה ב-i18n
- [ ] שלב 1: ברוכים הבאים + הסבר המערכת בשפת המשתמש
- [ ] שלב 2: הגדרת מטרות תרומה ומעשר
- [ ] שלב 3: הגדרת הכנסות ראשוניות (אישית + בן/בת זוג)
- [ ] שלב 4: הגדרת העדפות והודעות
- [ ] שלב 5: סיכום ואישור + התחלת השימוש
- [ ] שמירת נתונים ראשוניים במסד הנתונים
- [ ] סימון isFirstTimeSetupCompleted = true
- [ ] ניתוב אוטומטי לדשבורד לאחר השלמה

---

## 🏠 שלב 2 - דשבורד וניהול הכנסות

### 2.1 עמוד ניהול הכנסות (/income)
- [ ] יצירת עמוד ניהול הכנסות
- [ ] טופס עריכת הכנסות קבועות (אישית + בן/בת זוג)
- [ ] חישוב אוטומטי של סה"כ הכנסה
- [ ] חישוב מעשרות חודשיים (10%)
- [ ] טופס הוספת הכנסה חד פעמית
- [ ] רשימת הכנסות חד פעמיות עם אפשרות מחיקה
- [ ] אזהרה לפני מחיקת נתונים
- [ ] ולידציה לטפסים

### 2.2 דשבורד עיקרי (/dashboard)
- [ ] תצוגת נתוני החודש הנוכחי
- [ ] הצגת סה"כ הכנסה נטו
- [ ] הצגת מעשרות לתשלום
- [ ] הצגת מעשרות שניתנו
- [ ] חישוב יתרה/חוב (עם צבעים: ירוק/אדום)
- [ ] חישוב יתרה מצטברת
- [ ] רשימת תרומות החודש

### 2.3 ניווט בין חודשים
- [ ] כפתורי חצים לניווט ◀ ▶
- [ ] תצוגת חודש ושנה נוכחיים
- [ ] שמירת מצב הניווט ב-URL
- [ ] טעינת נתונים היסטוריים
- [ ] אנימציות מעבר בין חודשים

---

## 💰 שלב 3 - ניהול תרומות

### 3.1 עמוד ניהול תרומות (/donations)
- [ ] יצירת עמוד ניהול תרומות
- [ ] בחירת סוג תרומה (קבועה/מוגבלת/חד פעמית)
- [ ] טופס הוספת תרומה חדשה
- [ ] שדות: שם ארגון, סכום, סוג, פרטים נוספים
- [ ] עריכת תרומות קיימות
- [ ] מחיקת תרומות (עם אזהרה)
- [ ] סימון תרומות כפעילות/לא פעילות

### 3.2 שלושה סוגי תרומות
- [ ] תרומה קבועה (UNLIMITED) - חודשית ללא מגבלה
- [ ] תרומה מוגבלת (LIMITED) - X מתוך Y תשלומים
- [ ] תרומה חד פעמית (ONE_TIME) - חודש ספציפי
- [ ] ממשק שונה לכל סוג תרומה
- [ ] תצוגת התקדמות לתרומות מוגבלות

### 3.3 ניווט ומעקב
- [ ] ניווט בין חודשים לצפייה בתרומות
- [ ] מעקב אחר התקדמות תשלומים מוגבלים
- [ ] היסטוריה מלאה של תרומות
- [ ] סטטיסטיקות בסיסיות

---

## 🔔 שלב 4 - תכונות מתקדמות

### 4.1 מערכת התראות
- [ ] איקון פעמון בניווט עליון
- [ ] נקודה אדומה עבור התראות חדשות
- [ ] רשימת התראות (dropdown או modal)
- [ ] התראת תשלום אחרון למוגבלות
- [ ] סימון התראות כנקראות
- [ ] מחיקת התראות
- [ ] מערכת יצירת התראות אוטומטית

### 4.2 הגדרות שפה ומטבע
- [ ] עמוד הגדרות (/settings)
- [ ] בחירת שפה: עברית/אנגלית
- [ ] בחירת מטבע: שקל/דולר
- [ ] שמירת העדפות במסד הנתונים
- [ ] החלת השפה והמטבע בכל המערכת

### 4.3 ניהול חשבון
- [ ] שינוי פרטים אישיים (שם)
- [ ] שינוי סיסמה עם ולידציה
- [ ] הזנת סיסמה נוכחית
- [ ] הזנת סיסמה חדשה (פעמיים)
- [ ] בדיקת חוזק סיסמה
- [ ] הודעות הצלחה/שגיאה

---

## 👨‍💼 שלב 5 - פנל ניהול (למנהל בלבד)

### 5.1 דשבורד ניהול (/admin/dashboard)
- [ ] סטטיסטיקות כלליות של המערכת
- [ ] מספר משתמשים פעילים
- [ ] גרפים של שימוש יומי/שבועי/חודשי
- [ ] תכונות הכי פופולריות
- [ ] זמן ממוצע באתר
- [ ] סטטוס בריאות המערכת

### 5.2 ניהול משתמשים (/admin/users)
- [ ] רשימת כל המשתמשים
- [ ] תאריכי הרשמה
- [ ] סטטוס פעילות (מתי התחבר לאחרונה)
- [ ] משתמשים שלא פעילים זמן רב
- [ ] אפשרות הפעלה/השבתה של משתמש
- [ ] פילטרים וחיפוש

### 5.3 צפייה בלוגים (/admin/logs)
- [ ] רשימת כל הפעילות במערכת
- [ ] פילטר לפי משתמש
- [ ] פילטר לפי תאריכים
- [ ] פילטר לפי סוג פעילות
- [ ] ייצוא לוגים לקובץ
- [ ] חיפוש בלוגים

### 5.4 אנליטיקס (/admin/analytics)
- [ ] דוחות שימוש מפורטים
- [ ] גרפים אינטראקטיביים
- [ ] ניתוח התנהגות משתמשים
- [ ] מעקב אחר שגיאות וקריסות
- [ ] המלצות לשיפור

### 5.5 ניהול משוב ותקלות (/admin/feedback) - 🆕 חדש!
- [ ] עמוד ניהול דיווחי תקלות והצעות שיפור
- [ ] סיכום מהיר: סך פניות, תקלות פתוחות, הצעות פתוחות, טופלו השבוע
- [ ] טבלת דיווחים עם מיון וסינון:
  - [ ] סינון לפי סוג (תקלה/הצעת שיפור)
  - [ ] סינון לפי סטטוס (ממתין/בטיפול/טופל/נדחה)
  - [ ] סינון לפי תאריך
- [ ] עבור כל דיווח: סוג, שם ושולח, תוכן מקוצר, סטטוס צבעוני, תאריך
- [ ] Modal צפייה ועריכת דיווח:
  - [ ] הצגת כל פרטי הדיווח + פרטים טכניים
  - [ ] שינוי סטטוס עם תפריט נפתח
  - [ ] הוספת הערות מנהל
  - [ ] תאריך טיפול אוטומטי
- [ ] פעולות: שמירה, מחיקה (עם אישור)
- [ ] הגדרות מתקדמות:
  - [ ] התראות לאדמין על דיווחים חדשים
  - [ ] ייצוא דיווחים ל-CSV
  - [ ] סטטיסטיקות חודשיות

---

## 📬 שלב 6 - תכונות משוב ותמיכה - 🆕 חדש!

### 6.1 Modal דיווח תקלות זמין מכל עמוד
- [ ] הוספת כפתור קבוע "דווח על בעיה" בתחתית כל עמוד
- [ ] פתיחת Modal מהיר עם בחירת סוג (תקלה/הצעה)
- [ ] שמירת ההקשר הנוכחי (עמוד, פעולה שבוצעה)
- [ ] מילוי אוטומטי של פרטים טכניים

### 6.2 מערכת התראות למנהל על דיווחים חדשים
- [ ] התראה במערכת (כמו פעמון הודעות) על דיווח חדש
- [ ] התראת אימייל אוטומטית למנהל (אופציונלי)
- [ ] הבחנה בין תקלות דחופות להצעות רגילות
- [ ] סימון דיווחים חדשים שטרם נקראו

### 6.3 תכונות מתקדמות (אופציונלי לעתיד)
- [ ] מענה אוטומטי באימייל למדווח
- [ ] מערכת דירוג דחיפות לתקלות
- [ ] יכולת צירוף קבצים/צילומי מסך לדיווחים
- [ ] מעקב אחר זמן טיפול ממוצע
- [ ] שאלון שביעות רצון לאחר טיפול

---

## 🎨 שלב 7 - שיפורי UI/UX

### 7.1 עיצוב רספונסיבי (השלמה)
- [ ] בדיקה נוספת בכל הדפדפנים הפופולריים
- [ ] אופטימיזציה למסכים קטנים
- [ ] בדיקת נגישות במכשירי מגע

### 7.2 נגישות
- [ ] תמיכה בקורא מסך
- [ ] ניווט במקלדת
- [ ] ניגודיות מתאימה
- [ ] טקסטים ברורים

### 7.3 שיפורי חוויית משתמש
- [ ] אנימציות חלקות
- [ ] טעינה מהירה
- [ ] מצבי טעינה ושגיאה
- [ ] הודעות ברורות
- [ ] טיפים ועזרה בממשק

---

## 🔧 שלב 8 - אופטימיזציה וביצועים

### 8.1 ביצועים
- [ ] אופטימיזציה של שאילתות מסד נתונים
- [ ] caching של נתונים חוזרים
- [ ] lazy loading לרכיבים
- [ ] דחיסת תמונות וקבצים

### 8.2 אבטחה נוספת
- [ ] rate limiting לבקשות
- [ ] הגנה מפני CSRF
- [ ] הצפנת נתונים רגישים
- [ ] גיבוי אוטומטי של מסד הנתונים

### 8.3 ניטור ולוגים

- [ ] מערכת ניטור שגיאות
- [ ] התראות על בעיות במערכת
- [ ] מדדי ביצועים
- [ ] דוחות אוטומטיים

---

## 🚀 שלב 9 - השקה והחזקה

### 9.1 הכנה להשקה
- [ ] בדיקות מקיפות (testing)
- [ ] סביבת production
- [ ] הגדרת שרת
- [ ] certifications SSL
- [ ] domain name

### 9.2 תיעוד
- [ ] מדריך למשתמשים
- [ ] תיעוד טכני למפתחים
- [ ] FAQ
- [ ] וידאו הדרכה

### 9.3 תחזוקה שוטפת
- [ ] עדכונים ביטחוניים
- [ ] גיבויים שוטפים
- [ ] ניטור פעילות
- [ ] תמיכה למשתמשים

---

## 📈 שלב 10 - תכונות עתידיות (אופציונלי)

### 10.1 תכונות נוספות
- [ ] ייצוא דוחות PDF/Excel
- [ ] התראות נוספות (חוב מצטבר, תזכורות)
- [ ] גרפים ותרשימים אישיים
- [ ] יעדים והישגים
- [ ] תמיכה במטבעות נוספים

### 10.2 אינטגרציות
- [ ] סנכרון עם בנקים
- [ ] התראות SMS/Email
- [ ] תמיכה ברב שפתיות נוסף
- [ ] API למערכות חיצוניות

---

## ✅ סיכום התקדמות - מעודכן עם תכונות חדשות!

**שלב נוכחי:** התשתית הבסיסית והוספת תכונות חדשות
**משימות הושלמו:** 15/130+ 
**זמן משוער לסיום:** 3-4 חודשים (כולל תכונות חדשות)

### 🆕 תכונות חדשות שנוספו:
1. **עמוד ברוכים הבאים** - דף נחיתה מקצועי למשתמשים חדשים
2. **מערכת דיווח תקלות והצעות שיפור** - Modal חכם זמין מכל עמוד
3. **עמוד ניהול משוב לאדמין** - ניהול מרוכז של כל הדיווחים
4. **עיצוב רספונסיבי משופר** - Mobile First עם תמיכה מלאה
5. **בקרת גישה מפורטת** - הפניות חכמות לפי סוג משתמש

### סדר עדיפויות גבוה:
1. ✅ הושלם: מערכת התחברות והרשמה בסיסית + i18n
2. 🔄 בתהליך: תשתית מסד נתונים ומערכת הרשאות
3. ⏳ הבא: עמוד ברוכים הבאים + Modal דיווח תקלות
4. ⏳ לאחר מכן: שאלון ראשוני ודשבורד בסיסי
5. ⏳ שלב מתקדם: עמוד ניהול משוב לאדמין

### הערות מעודכנות:
- ✅ כל משימה מסומנת ב-[ ] לביצוע ו-[✅] כשהושלמה
- 🆕 משימות חדשות מסומנות במילה "חדש!" או "משופר!"
- ניתן לעדכן קובץ זה במהלך הפיתוח
- משימות יכולות להשתנות לפי צרכים שיתגלו
- דגש על חוויית משתמש מעולה ומערכת תמיכה מובנית
